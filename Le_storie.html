<!DOCTYPE html>
<html lang="it"><head>
<meta charset="utf-8">
<meta name="author" content="theBabr">
<meta name="theme-color" content="#F6F3E2">
<title>Le Storie</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css">
<link rel="stylesheet" href="./src/css/common.css">
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top  shadow bg-light"> 
<div class="navbar-brand mt-auto">
	<a href="index.html">
		<div class="d-inline-block"><img id="navbarlogo" src="./src/img/logo.png" width="30" height="30" alt=""></div>
	</a>
	Fogli di Carta
</div>
<button class="navbar-toggler" type="button" 
data-toggle="collapse" data-target="#theNavbar" 
aria-controls="theNavbar" aria-expanded="false" 
aria-label="Toggle navigation">
	<span class="fa fa-bars"></span>
</button>
<div id="theNavbar" class="navbar-collapse collapse ">
<ul class="navbar-nav ml-auto">
<li><a href="Il_progetto.html"  class="nav-link text-center">Il progetto</a></li>
<li><a class="nav-link text-center">Le storie</a></li>
<li><a href="Racconta_una_storia.html" class="nav-link text-center">Condividi la tua storia</a></li>
<li><a href="Contatti.html" class="nav-link text-center">Contatti</a></li>
<li><a href="en\index.html" class="nav-link text-center">English version</a></li>

</ul>
</div>
</nav>
<main class="container">
<h1 class="text-center my-5">Le storie</h1>
	<div id="all" class="swiper-container text-center">
		<div class="swiper-wrapper">
			<div class="swiper-slide">
		<br>	<br>	<br>	<br>	
				<div class="spinner-border mt-5" role="status">
				  <span class="sr-only">Loading...</span>
				</div>
			</div>
		</div>
</div></main>
<section class="">
<footer class="border-top pt-4 mt-4">
<div class="container">
	<div class="row">
		<div class="col-6 col-md-4">
			<ul class="list-unstyled text-small">
				<li><a href="index.html">Fogli Di Carta</a></li>
				<li><a class="small" >&copy Copyright 2019/2020</a></li>
			</ul>
		</div>
		<div class="col-6 col-md-4 order-md-3">
			<ul class="list-unstyled text-small">
				<li><a>Follow us</a></li>
				<li>
				<a href="https://www.facebook.com/Fogli-Di-Carta-105480417494151/"><span class="fab fa-facebook-f"></span></a>
				<a href="https://www.instagram.com/fogli.di.carta/"><span class="fab fa-instagram"></span></a>
				</li>
			</ul>
		</div>
		<div class="col-6 col-md-4">
			<ul class="list-unstyled text-small">
				<li><a href="index.html">Home</a></li>
				<li><a href="Il_progetto.html">Il progetto</a></li>
				<li><a href="Le_storie.html">Le storie</a></li>
				<li><a href="Racconta_una_storia.html">Condividi la tua storia</a></li>
				<li><a href="Contatti.html">Contatti</a></li>
				<li><a href="Termini_e_condizioni.html">Terms and conditions</a></li>
				<li><a href="privacy.html">Privacy policy</a></li>
				<li><a href="admin.html">Admin</a></li>
				<li><a href="login.html">Login</a></li>
			</ul>
		</div> 
	</div>
</div>
</footer>
</section>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://unpkg.com/swiper/js/swiper.min.js"></script>
<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-database.js"></script>

<script>

   // Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "AIzaSyBXTikd9cHlOQrAbK-F-lObaTgfZxe0fM0",
    authDomain: "foglidicarta-faccf.firebaseapp.com",
    databaseURL: "https://foglidicarta-faccf.firebaseio.com",
    projectId: "foglidicarta-faccf",
    storageBucket: "foglidicarta-faccf.appspot.com",
    messagingSenderId: "211559477338",
    appId: "1:211559477338:web:3a3262a4cdaf433cd0e863"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  

var ref = firebase.database().ref("public");
ref.once("value")
  .then(function(snapshot) {
  try {
					var nstories = Object.keys(snapshot.val());
					//console.log("intero oggetto " + nstories);
					//console.log("n. elementi " + nstories.length);
					//var first = nstories[0];
					//console.log("path primo elemento " + first);
					//var titolo = snapshot.child(first).val().titolo;
					//var storia = snapshot.child(first).val().storia;
					//console.log("contenuto "+first+" "+titolo + "\n" + storia);
					var tit = []; var aut = []; var par = []; var storia = "";
					var i; var autore = "";
					for (i = 0; i< nstories.length; i++) {
						autore = snapshot.child(nstories[i]).val().autore;
						storia = snapshot.child(nstories[i]).val().storia;
						aut.push(autore);
						par.push(storia);
						
					}
					var story = "";
					for (i in aut)  {
					if (aut[i]!=undefined) {
					if (i <= 0) {pt = " class=\"pt-5\"";}
						story +=
						"<div class=\"swiper-slide\">"+"\n"+
						"<p class='text-left'>"+par[i]+"</p>"+"\n"+
						"<h4 class='my-5 pb-5'>"+aut[i]+"</h4>"+"\n"+
						"</div>"+"\n";
						}
					}
					var all = 
					
					"<div class=\"mt-5 swiper-wrapper\">"+"\n"+
					story+"\n"+
					"</div>"+"\n"+
					"<div class=\"swiper-pagination\"></div>"+"\n"+
					"<div class=\"swiper-button-prev swiper-button-black text-black-50\"></div>"+"\n"+
					"<div class=\"swiper-button-next swiper-button-black text-black-50\"></div>"+"\n"+

					"";
					document.getElementById("all").innerHTML = all;
		} catch(err) {
			document.getElementById("all").innerHTML = "<div class ='my-5'>"+"\n"+
			"<h2>Nessuna storia ancora pubblicata</h2>"+"\n"+
			'<a href="Racconta_una_storia.html"  class="my-5 btn btn-secondary btn-lg btn-block">Racconta la tua storia</a>'+"\n"+
			"</div>\n";
		}
		
					
	 var mySwiper = new Swiper (
	'.swiper-container', {
	direction: 'horizontal',
	loop: true, 
	pagination: {	
		el: '.swiper-pagination',
		dynamicBullets: true,
	}, 
	navigation: {
		nextEl: '.swiper-button-next', 
		prevEl: '.swiper-button-prev',
		},
    scrollbar: {
      container :'.swiper-scrollbar',
      visibility: false  
    }
	});
  });
	</script>
<script type="text/javascript" src="src/script/script.js"></script>
</body>
</html>
